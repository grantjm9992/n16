"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[469],{9632:(v,h,i)=>{i.d(h,{n:()=>t});var _=i(5384),u=i(4650);let t=(()=>{class l extends _.s{getAll(a=""){return this.get(`${this.getUrl()}?${a}`)}find(a){return this.get(`${this.getUrl()}/${a}`)}create(a){return this.post(`${this.getUrl()}`,a)}update(a,m){return this.post(`${this.getUrl()}/${a}`,m)}remove(a){return this.delete(`${this.getUrl()}/${a}`)}}return l.\u0275fac=function(){let p;return function(m){return(p||(p=u.n5z(l)))(m||l)}}(),l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},5954:(v,h,i)=>{i.d(h,{s:()=>t});var _=i(5384),u=i(4650);let t=(()=>{class l extends _.s{getCompanies(){return this.get("/companies")}getCompany(a){return this.get(`/companies/${a}`)}updateCompany(a,m){return this.post(`/companies/${a}`,m)}createCompany(a){return this.post("/companies",a)}}return l.\u0275fac=function(){let p;return function(m){return(p||(p=u.n5z(l)))(m||l)}}(),l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3469:(v,h,i)=>{i.r(h),i.d(h,{HolidayModule:()=>D});var _=i(6895),u=i(9585),t=i(4650),l=i(9632);let p=(()=>{class o extends l.n{getUrl(){return"/holidays"}accept(e){return this.get(`${this.getUrl()}/${e}/accept`)}reject(e){return this.get(`${this.getUrl()}/${e}/reject`)}revoke(e){return this.get(`${this.getUrl()}/${e}/revoke`)}}return o.\u0275fac=function(){let r;return function(n){return(r||(r=t.n5z(o)))(n||o)}}(),o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var a=i(3599),m=i(5954),y=i(8386),f=i(9061);function A(o,r){if(1&o&&t._uU(0),2&o){const e=r.value;t.AsE(" ",e.name," ",e.surname," ")}}function Z(o,r){1&o&&(t.TgZ(0,"ngx-datatable-column",20),t.YNc(1,A,1,2,"ng-template",18),t.qZA())}function C(o,r){1&o&&(t.TgZ(0,"button",21),t._UZ(1,"i",22),t.qZA()),2&o&&t.s9C("ngbPopover",r.row.notes)}function T(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().row,c=t.oxw(2);return t.KtG(c.accept(s.id))}),t._uU(1," Accept "),t.qZA()}}function x(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().row,c=t.oxw(2);return t.KtG(c.reject(s.id))}),t._uU(1," Reject "),t.qZA()}}function U(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().row,c=t.oxw(2);return t.KtG(c.revoke(s.id))}),t._uU(1," Revoke "),t.qZA()}}function S(o,r){if(1&o&&(t.YNc(0,T,2,0,"button",24),t.YNc(1,x,2,0,"button",24),t.YNc(2,U,2,0,"button",24)),2&o){const e=r.row;t.Q6J("ngIf","accepted"!==e.status),t.xp6(1),t.Q6J("ngIf","pending"===e.status),t.xp6(1),t.Q6J("ngIf","accepted"===e.status)}}function H(o,r){1&o&&(t.TgZ(0,"ngx-datatable-column",23),t.YNc(1,S,3,3,"ng-template",18),t.qZA()),2&o&&t.Q6J("sortable",!1)}let w=(()=>{class o{constructor(e,n,s,c,g){this.holidayApiService=e,this.router=n,this.activatedRoute=s,this.companyApiService=c,this.userService=g,this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=u.hq}ngOnInit(){this.user=this.userService.getUser(),this.loadData()}loadData(){this.loadingIndicator=!0,this.holidayApiService.getAll().subscribe(e=>{this.rows=e.data,this.loadingIndicator=!1})}onSelect(e){console.log(e)}accept(e){this.holidayApiService.accept(e).subscribe(n=>{this.loadData()})}reject(e){this.holidayApiService.reject(e).subscribe(n=>{this.loadData()})}revoke(e){this.holidayApiService.revoke(e).subscribe(n=>{this.loadData()})}onRowClicked(e){"click"===e.type&&this.router.navigate([e.row.id],{relativeTo:this.activatedRoute})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p),t.Y36(a.F0),t.Y36(a.gz),t.Y36(m.s),t.Y36(y.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-holiday"]],decls:24,vars:7,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],["routerLink","new","tabindex","-1","role","button",1,"btn","btn-primary"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit","activate"],["name","Teacher","prop","teacher",4,"ngIf"],["name","Date start","prop","start_date"],["name","Date end","prop","end_date"],["name","Status","prop","status"],["name","Information"],["ngx-datatable-cell-template",""],["name","Actions","prop","id",3,"sortable",4,"ngIf"],["name","Teacher","prop","teacher"],["type","button","placement","start",1,"btn","btn-primary",3,"ngbPopover"],[1,"feather","icon-info"],["name","Actions","prop","id",3,"sortable"],["class","btn btn-dark mx-1",3,"click",4,"ngIf"],[1,"btn","btn-dark","mx-1",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Holidays"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"List"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),t._uU(12," Holiday requests "),t.TgZ(13,"a",10),t._uU(14,"New"),t.qZA()(),t.TgZ(15,"div",11)(16,"ngx-datatable",12),t.NdJ("activate",function(c){return n.onRowClicked(c)}),t.YNc(17,Z,2,0,"ngx-datatable-column",13),t._UZ(18,"ngx-datatable-column",14)(19,"ngx-datatable-column",15)(20,"ngx-datatable-column",16),t.TgZ(21,"ngx-datatable-column",17),t.YNc(22,C,2,1,"ng-template",18),t.qZA(),t.YNc(23,H,2,1,"ngx-datatable-column",19),t.qZA()()()()()()),2&e&&(t.xp6(16),t.Q6J("rows",n.rows)("loadingIndicator",n.loadingIndicator)("columnMode",n.ColumnMode.force)("footerHeight",50)("limit",10),t.xp6(1),t.Q6J("ngIf","teacher"!==n.user.user_role),t.xp6(6),t.Q6J("ngIf","teacher"!==n.user.user_role))},dependencies:[_.O5,a.yS,u.nE,u.UC,u.vq,f.o8]}),o})();var d=i(433),k=i(5902),b=i(9177);function I(o,r){if(1&o&&t._uU(0),2&o){const e=r.item,n=t.oxw(2);t.hij(" ",n.getUser(e)," ")}}function E(o,r){if(1&o&&(t.TgZ(0,"div",12)(1,"label",13),t._uU(2,"Teacher"),t.qZA(),t.TgZ(3,"ng-select",25),t.YNc(4,I,1,1,"ng-template",26),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("items",e.teachers)("searchFn",e.customSearchFn)}}function Y(o,r){if(1&o&&(t.TgZ(0,"p",27),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.Oqu(e)}}let M=(()=>{class o{constructor(e,n,s,c,g,J){this.userService=e,this.teacherApiService=n,this.holidayApiService=s,this.formBuilder=c,this.activatedRoute=g,this.router=J,this.teachers=[],this.error=[]}ngOnInit(){this.activeUser=this.userService.getUser(),this.teacherApiService.getTeachers().subscribe(e=>{this.teachers=e.data}),this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.form=this.formBuilder.group("teacher"===this.activeUser.user_role?{start_date:["",d.kI.required],end_date:["",d.kI.required],notes:[""]}:{teacher_id:[null,d.kI.required],start_date:["",d.kI.required],end_date:["",d.kI.required],notes:[""]}),null!==this.id&&"new"!==this.id&&this.holidayApiService.find(this.id).subscribe(e=>{this.holiday=e.data,this.form.patchValue(e.data)})}onSubmit(){this.error=[];let e=this.form.value;e.start_date=this.getDateString(e.start_date),e.end_date=this.getDateString(e.end_date),"new"===this.id?this.holidayApiService.create(e).subscribe(n=>{this.router.navigate(["/holiday"])},n=>{if(n.errors)for(let s in n.errors)n.errors[s].forEach(c=>{this.error.push(c)});else this.error.push(n.message)}):this.holidayApiService.update(this.id,e).subscribe(n=>{this.router.navigate(["/holiday"])},n=>{if(n.errors)for(let s in n.errors)n.errors[s].forEach(c=>{this.error.push(c)});else this.error.push(n.message)})}getUser(e){return e.name+" "+e.surname}getDateString(e){return`${e.year}-${this.pad(e.month)}-${this.pad(e.day)}`}pad(e,n=2){let s=e+"";for(;s.length<n;)s="0"+s;return s}customSearchFn(e,n){return e=e.toLocaleLowerCase(),n.name.toLocaleLowerCase().indexOf(e)>-1||n.surname.toLocaleLowerCase().indexOf(e)>-1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.K),t.Y36(k.O),t.Y36(p),t.Y36(d.qu),t.Y36(a.gz),t.Y36(a.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit"]],decls:40,vars:3,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","../"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],["class","mb-3",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"input-group"],["placeholder","yyyy-mm-dd","formControlName","start_date","ngbDatepicker","",1,"form-control"],["start_date","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["placeholder","yyyy-mm-dd","formControlName","end_date","ngbDatepicker","",1,"form-control"],["end_date","ngbDatepicker"],["id","notes","formControlName","notes","rows","5",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2"],["routerLink","../",1,"btn","btn-secondary","me-2"],["class","text-danger mt-1",4,"ngFor","ngForOf"],["bindValue","id",3,"items","searchFn"],["ng-option-tmp","","ng-label-tmp",""],[1,"text-danger","mt-1"]],template:function(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Holidays"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"New request"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),t._uU(12,"Holiday request"),t.qZA(),t.TgZ(13,"form",10),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.YNc(14,E,5,2,"div",11),t.TgZ(15,"div",12)(16,"label",13),t._uU(17,"From"),t.qZA(),t.TgZ(18,"div",14),t._UZ(19,"input",15,16),t.TgZ(21,"button",17),t.NdJ("click",function(){t.CHM(s);const g=t.MAs(20);return t.KtG(g.toggle())}),t._UZ(22,"i",18),t.qZA()()(),t.TgZ(23,"div",12)(24,"label",13),t._uU(25,"To"),t.qZA(),t.TgZ(26,"div",14),t._UZ(27,"input",19,20),t.TgZ(29,"button",17),t.NdJ("click",function(){t.CHM(s);const g=t.MAs(28);return t.KtG(g.toggle())}),t._UZ(30,"i",18),t.qZA()()(),t.TgZ(31,"div",12)(32,"label",13),t._uU(33,"Notes"),t.qZA(),t._UZ(34,"textarea",21),t.qZA(),t.TgZ(35,"button",22),t._uU(36,"Submit"),t.qZA(),t.TgZ(37,"div",23),t._uU(38,"Cancel"),t.qZA()(),t.YNc(39,Y,2,1,"p",24),t.qZA()()()()}2&e&&(t.xp6(13),t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngIf","teacher"!==n.activeUser.user_role),t.xp6(25),t.Q6J("ngForOf",n.error))},dependencies:[_.sg,_.O5,a.rH,a.yS,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,b.w9,b.ir,b.mR,f.J4]}),o})();var F=i(9628);const N=[{path:"",component:w},{path:":id",component:M}];let D=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[_.ez,a.Bz.forChild(N),u.xD,d.u5,d.UX,b.A0,f.M,F.L,f.HK,f.dT]}),o})()}}]);