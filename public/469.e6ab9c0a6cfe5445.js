"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[469],{9632:(h,g,i)=>{i.d(g,{n:()=>t});var _=i(5384),d=i(4650);let t=(()=>{class l extends _.s{getAll(r=""){return this.get(`${this.getUrl()}?${r}`)}find(r){return this.get(`${this.getUrl()}/${r}`)}create(r){return this.post(`${this.getUrl()}`,r)}update(r,m){return this.post(`${this.getUrl()}/${r}`,m)}remove(r){return this.delete(`${this.getUrl()}/${r}`)}}return l.\u0275fac=function(){let p;return function(m){return(p||(p=d.n5z(l)))(m||l)}}(),l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},5954:(h,g,i)=>{i.d(g,{s:()=>t});var _=i(5384),d=i(4650);let t=(()=>{class l extends _.s{getCompanies(){return this.get("/companies")}getCompany(r){return this.get(`/companies/${r}`)}updateCompany(r,m){return this.post(`/companies/${r}`,m)}createCompany(r){return this.post("/companies",r)}}return l.\u0275fac=function(){let p;return function(m){return(p||(p=d.n5z(l)))(m||l)}}(),l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3469:(h,g,i)=>{i.r(g),i.d(g,{HolidayModule:()=>Y});var _=i(6895),d=i(9585),t=i(4650),l=i(9632);let p=(()=>{class n extends l.n{getUrl(){return"/holidays"}accept(e){return this.get(`${this.getUrl()}/${e}/accept`)}reject(e){return this.get(`${this.getUrl()}/${e}/reject`)}revoke(e){return this.get(`${this.getUrl()}/${e}/revoke`)}}return n.\u0275fac=function(){let a;return function(o){return(a||(a=t.n5z(n)))(o||n)}}(),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var r=i(3599),m=i(5954),v=i(8386),b=i(9061);function y(n,a){1&n&&(t.TgZ(0,"a",20),t._uU(1,"New"),t.qZA())}function A(n,a){if(1&n&&t._uU(0),2&n){const e=a.value;t.AsE(" ",e.name," ",e.surname," ")}}function Z(n,a){1&n&&(t.TgZ(0,"ngx-datatable-column",21),t.YNc(1,A,1,2,"ng-template",18),t.qZA())}function C(n,a){1&n&&(t.TgZ(0,"button",22),t._UZ(1,"i",23),t.qZA()),2&n&&t.s9C("ngbPopover",a.row.notes)}function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().row,s=t.oxw(2);return t.KtG(s.accept(c.id))}),t._uU(1," Accept "),t.qZA()}}function x(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().row,s=t.oxw(2);return t.KtG(s.reject(c.id))}),t._uU(1," Reject "),t.qZA()}}function U(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().row,s=t.oxw(2);return t.KtG(s.revoke(c.id))}),t._uU(1," Revoke "),t.qZA()}}function H(n,a){if(1&n&&(t.YNc(0,T,2,0,"button",25),t.YNc(1,x,2,0,"button",25),t.YNc(2,U,2,0,"button",25)),2&n){const e=a.row;t.Q6J("ngIf","accepted"!==e.status),t.xp6(1),t.Q6J("ngIf","pending"===e.status),t.xp6(1),t.Q6J("ngIf","accepted"===e.status)}}function S(n,a){1&n&&(t.TgZ(0,"ngx-datatable-column",24),t.YNc(1,H,3,3,"ng-template",18),t.qZA()),2&n&&t.Q6J("sortable",!1)}let I=(()=>{class n{constructor(e,o,c,s,f){this.holidayApiService=e,this.router=o,this.activatedRoute=c,this.companyApiService=s,this.userService=f,this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=d.hq}ngOnInit(){this.user=this.userService.getUser(),this.loadData()}loadData(){this.loadingIndicator=!0,this.holidayApiService.getAll().subscribe(e=>{this.rows=e.data,this.loadingIndicator=!1})}onSelect(e){console.log(e)}accept(e){this.holidayApiService.accept(e).subscribe(o=>{this.loadData()})}reject(e){this.holidayApiService.reject(e).subscribe(o=>{this.loadData()})}revoke(e){this.holidayApiService.revoke(e).subscribe(o=>{this.loadData()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p),t.Y36(r.F0),t.Y36(r.gz),t.Y36(m.s),t.Y36(v.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-holiday"]],decls:23,vars:8,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],["routerLink","new","class","btn btn-primary","tabindex","-1","role","button",4,"ngIf"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit"],["name","Teacher","prop","teacher",4,"ngIf"],["name","Date start","prop","start_date"],["name","Date end","prop","end_date"],["name","Status","prop","status"],["name","Information"],["ngx-datatable-cell-template",""],["name","Actions","prop","id",3,"sortable",4,"ngIf"],["routerLink","new","tabindex","-1","role","button",1,"btn","btn-primary"],["name","Teacher","prop","teacher"],["type","button","placement","start",1,"btn","btn-primary",3,"ngbPopover"],[1,"feather","icon-info"],["name","Actions","prop","id",3,"sortable"],["class","btn btn-dark mx-1",3,"click",4,"ngIf"],[1,"btn","btn-dark","mx-1",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Holidays"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"List"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),t._uU(12," Holiday requests "),t.YNc(13,y,2,0,"a",10),t.qZA(),t.TgZ(14,"div",11)(15,"ngx-datatable",12),t.YNc(16,Z,2,0,"ngx-datatable-column",13),t._UZ(17,"ngx-datatable-column",14)(18,"ngx-datatable-column",15)(19,"ngx-datatable-column",16),t.TgZ(20,"ngx-datatable-column",17),t.YNc(21,C,2,1,"ng-template",18),t.qZA(),t.YNc(22,S,2,1,"ngx-datatable-column",19),t.qZA()()()()()()),2&e&&(t.xp6(13),t.Q6J("ngIf","teacher"===o.user.user_role),t.xp6(2),t.Q6J("rows",o.rows)("loadingIndicator",o.loadingIndicator)("columnMode",o.ColumnMode.force)("footerHeight",50)("limit",10),t.xp6(1),t.Q6J("ngIf","teacher"!==o.user.user_role),t.xp6(6),t.Q6J("ngIf","teacher"!==o.user.user_role))},dependencies:[_.O5,r.yS,d.nE,d.UC,d.vq,b.o8]}),n})();var u=i(433);function E(n,a){if(1&n&&(t.TgZ(0,"p",24),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}let k=(()=>{class n{constructor(e,o,c){this.holidayApiService=e,this.formBuilder=o,this.router=c,this.error=[]}ngOnInit(){this.form=this.formBuilder.group({start_date:["",u.kI.required],end_date:["",u.kI.required],notes:[""]})}onSubmit(){this.error=[];let e=this.form.value;e.start_date=this.getDateString(e.start_date),e.end_date=this.getDateString(e.end_date),this.holidayApiService.create(e).subscribe(o=>{this.router.navigate(["/event"])},o=>{if(o.errors)for(let c in o.errors)o.errors[c].forEach(s=>{this.error.push(s)});else this.error.push(o.message)})}getDateString(e){return`${e.year}-${this.pad(e.month)}-${this.pad(e.day)}`}pad(e,o=2){let c=e+"";for(;c.length<o;)c="0"+c;return c}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p),t.Y36(u.qu),t.Y36(r.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit"]],decls:39,vars:2,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","../"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],[1,"input-group"],["placeholder","yyyy-mm-dd","formControlName","start_date","ngbDatepicker","",1,"form-control"],["start_date","ngbDatepicker"],["type","button",1,"input-group-text",3,"click"],[1,"feather","icon-calendar","icon-md","text-muted"],["placeholder","yyyy-mm-dd","formControlName","end_date","ngbDatepicker","",1,"form-control"],["end_date","ngbDatepicker"],["id","notes","formControlName","notes","rows","5",1,"form-control"],["type","submit",1,"btn","btn-primary","me-2"],["routerLink","../",1,"btn","btn-secondary","me-2"],["class","text-danger mt-1",4,"ngFor","ngForOf"],[1,"text-danger","mt-1"]],template:function(e,o){if(1&e){const c=t.EpF();t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Holidays"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"New request"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),t._uU(12,"Holiday request"),t.qZA(),t.TgZ(13,"form",10),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(14,"div",11)(15,"label",12),t._uU(16,"From"),t.qZA(),t.TgZ(17,"div",13),t._UZ(18,"input",14,15),t.TgZ(20,"button",16),t.NdJ("click",function(){t.CHM(c);const f=t.MAs(19);return t.KtG(f.toggle())}),t._UZ(21,"i",17),t.qZA()()(),t.TgZ(22,"div",11)(23,"label",12),t._uU(24,"To"),t.qZA(),t.TgZ(25,"div",13),t._UZ(26,"input",18,19),t.TgZ(28,"button",16),t.NdJ("click",function(){t.CHM(c);const f=t.MAs(27);return t.KtG(f.toggle())}),t._UZ(29,"i",17),t.qZA()()(),t.TgZ(30,"div",11)(31,"label",12),t._uU(32,"Notes"),t.qZA(),t._UZ(33,"textarea",20),t.qZA(),t.TgZ(34,"button",21),t._uU(35,"Submit"),t.qZA(),t.TgZ(36,"div",22),t._uU(37,"Cancel"),t.qZA()(),t.YNc(38,E,2,1,"p",23),t.qZA()()()()}2&e&&(t.xp6(13),t.Q6J("formGroup",o.form),t.xp6(25),t.Q6J("ngForOf",o.error))},dependencies:[_.sg,r.rH,r.yS,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,b.J4]}),n})();var M=i(9177),w=i(6017),D=i(9628);const N=[{path:"",component:I},{path:"new",component:k,canActivate:[w.F]}];let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_.ez,r.Bz.forChild(N),d.xD,u.u5,u.UX,M.A0,b.M,D.L,b.HK,b.dT]}),n})()}}]);