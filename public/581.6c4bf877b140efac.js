"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[581],{3581:(k,d,l)=>{l.r(d),l.d(d,{ClassroomModule:()=>T});var u=l(6895),m=l(9585),o=l(4650),p=l(6347),c=l(3599);let f=(()=>{class t{constructor(e,r,s){this.classroomApiService=e,this.router=r,this.activatedRoute=s,this.rows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=m.hq}ngOnInit(){this.classroomApiService.getClassrooms().subscribe(e=>{this.rows=e.data,this.loadingIndicator=!1})}onRowClicked(e){"click"===e.type&&this.router.navigate([e.row.id],{relativeTo:this.activatedRoute})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(p.s),o.Y36(c.F0),o.Y36(c.gz))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-classroom"]],decls:19,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],["routerLink","new","tabindex","-1","role","button",1,"btn","btn-primary"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit","activate"],["name","Name","prop","name"],["name","Company","prop","company.name"]],template:function(e,r){1&e&&(o.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),o._uU(4,"Classrooms"),o.qZA()(),o.TgZ(5,"li",4),o._uU(6,"List"),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),o._uU(12," Classrooms "),o.TgZ(13,"a",10),o._uU(14,"New"),o.qZA()(),o.TgZ(15,"div",11)(16,"ngx-datatable",12),o.NdJ("activate",function(a){return r.onRowClicked(a)}),o._UZ(17,"ngx-datatable-column",13)(18,"ngx-datatable-column",14),o.qZA()()()()()()),2&e&&(o.xp6(16),o.Q6J("rows",r.rows)("loadingIndicator",r.loadingIndicator)("columnMode",r.ColumnMode.force)("footerHeight",50)("limit",10))},dependencies:[c.yS,m.nE,m.UC]}),t})();var i=l(433),g=l(5954),C=l(8386),h=l(2851);function v(t,n){1&t&&o._UZ(0,"input",24),2&t&&o.Q6J("hidden",!0)}function _(t,n){if(1&t&&(o.TgZ(0,"option",28),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.Q6J("value",e.id),o.xp6(1),o.Oqu(e.name)}}function b(t,n){if(1&t&&(o.TgZ(0,"div",11)(1,"label",25),o._uU(2,"Company"),o.qZA(),o.TgZ(3,"select",26),o.YNc(4,_,2,2,"option",27),o.qZA()()),2&t){const e=o.oxw();o.xp6(4),o.Q6J("ngForOf",e.companies)}}function Z(t,n){if(1&t&&(o.TgZ(0,"p",29),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.xp6(1),o.Oqu(e)}}const y=[{path:"",component:f},{path:":id",component:(()=>{class t{constructor(e,r,s,a,U,A){this.router=e,this.activatedRoute=r,this.classroomApiService=s,this.companyApiService=a,this.userService=U,this.formBuilder=A,this.error=[],this.companies=[],this.classroom=null,this.id=null}ngOnInit(){this.classroomForm=this.formBuilder.group({name:["",i.kI.required],order:["",i.kI.required],capacity:["",i.kI.required],text_colour:["",i.kI.required],fill_colour:["",i.kI.required],company_id:["",i.kI.required]}),this.activeUser=this.userService.getUser(),"super_admin"!==this.activeUser.user_role&&"admin"!==this.activeUser.user_role&&this.classroomForm.patchValue({company_id:this.activeUser.company_id}),this.companyApiService.getCompanies().subscribe(e=>{this.companies=e.data}),this.id=this.activatedRoute.snapshot.paramMap.get("id"),null!==this.id&&this.classroomApiService.getClassroom(this.id).subscribe(e=>{this.classroom=e.data,this.classroomForm.patchValue(e.data),this.fill_colour=this.classroom.fill_colour,this.text_colour=this.classroom.text_colour})}onTextColourChange(e){this.classroomForm.patchValue({text_colour:e})}onFillColourChange(e){this.classroomForm.patchValue({fill_colour:e})}onSubmit(){this.error=[];const e={...this.classroom,...this.classroomForm.value};"new"!==this.id?this.classroomApiService.updateClassroom(this.classroom.id,e).subscribe(()=>{this.router.navigate(["/classroom"])},r=>{if(r.errors)for(let s in r.errors)r.errors[s].forEach(a=>{this.error.push(a)});else this.error.push(r.message)}):this.classroomApiService.createClassroom(e).subscribe(()=>{this.router.navigate(["/classroom"])},r=>{if(r.errors)for(let s in r.errors)r.errors[s].forEach(a=>{this.error.push(a)});else this.error.push(r.message)})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(c.F0),o.Y36(c.gz),o.Y36(p.s),o.Y36(g.s),o.Y36(C.K),o.Y36(i.qu))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-edit"]],decls:41,vars:11,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","../"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","autocomplete","off","placeholder","Name","formControlName","name",1,"form-control"],["class","form-control wd-150","formControlName","company_id",3,"hidden",4,"ngIf"],["class","mb-3",4,"ngIf"],["for","capacity",1,"form-label"],["type","integer","id","capacity","autocomplete","off","placeholder","Capacity","formControlName","capacity",1,"form-control"],["type","integer","id","order","autocomplete","off","placeholder","Order","formControlName","order",1,"form-control"],[1,"form-label"],[1,"form-control","wd-150",3,"colorPicker","colorPickerChange"],["type","submit",1,"btn","btn-primary","me-2"],["routerLink","../",1,"btn","btn-secondary"],["class","text-danger mt-1",4,"ngFor","ngForOf"],["formControlName","company_id",1,"form-control","wd-150",3,"hidden"],["for","company_id",1,"form-label"],["id","company_id","formControlName","company_id",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger","mt-1"]],template:function(e,r){1&e&&(o.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),o._uU(4,"Classrooms"),o.qZA()(),o.TgZ(5,"li",4),o._uU(6),o.qZA()()(),o.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),o._uU(12,"Classroom"),o.qZA(),o.TgZ(13,"form",10),o.NdJ("ngSubmit",function(){return r.onSubmit()}),o.TgZ(14,"div",11)(15,"label",12),o._uU(16,"Name"),o.qZA(),o._UZ(17,"input",13),o.qZA(),o.YNc(18,v,1,1,"input",14),o.YNc(19,b,5,1,"div",15),o.TgZ(20,"div",11)(21,"label",16),o._uU(22,"Capacity"),o.qZA(),o._UZ(23,"input",17),o.qZA(),o.TgZ(24,"div",11)(25,"label",16),o._uU(26,"Order"),o.qZA(),o._UZ(27,"input",18),o.qZA(),o.TgZ(28,"div",11)(29,"label",19),o._uU(30,"Fill colour"),o.qZA(),o.TgZ(31,"input",20),o.NdJ("colorPickerChange",function(a){return r.fill_colour=a})("colorPickerChange",function(a){return r.onFillColourChange(a)}),o.qZA()(),o.TgZ(32,"div",11)(33,"label",19),o._uU(34,"Text colour"),o.qZA(),o.TgZ(35,"input",20),o.NdJ("colorPickerChange",function(a){return r.text_colour=a})("colorPickerChange",function(a){return r.onTextColourChange(a)}),o.qZA()(),o.TgZ(36,"button",21),o._uU(37,"Submit"),o.qZA(),o.TgZ(38,"div",22),o._uU(39,"Cancel"),o.qZA()(),o.YNc(40,Z,2,1,"p",23),o.qZA()()()()),2&e&&(o.xp6(6),o.Oqu(null===r.classroom?"Edit":"New"),o.xp6(7),o.Q6J("formGroup",r.classroomForm),o.xp6(5),o.Q6J("ngIf","super_admin"!==r.activeUser.user_role&&"admin"!==r.activeUser.user_role),o.xp6(1),o.Q6J("ngIf","super_admin"==r.activeUser.user_role||"admin"==r.activeUser.user_role),o.xp6(12),o.Udp("background",r.fill_colour),o.Q6J("colorPicker",r.fill_colour),o.xp6(4),o.Udp("background",r.text_colour),o.Q6J("colorPicker",r.text_colour),o.xp6(5),o.Q6J("ngForOf",r.error))},dependencies:[u.sg,u.O5,c.rH,c.yS,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u,h.Kk]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[u.ez,c.Bz.forChild(y),m.xD,i.u5,i.UX,h.e4]}),t})()}}]);