"use strict";(self.webpackChunknobleui_angular=self.webpackChunknobleui_angular||[]).push([[426],{1426:(w,m,s)=>{s.r(m),s.d(m,{UserModule:()=>C});var p=s(6895),d=s(9585),e=s(4650),f=s(5384);let c=(()=>{class o extends f.s{getUsers(){return this.get("/users")}getUser(t){return this.get(`/users/${t}`)}updateUser(t,r){return this.post(`/users/${t}`,r)}updateUserPassword(t,r){return this.post(`/users/${t}/update-password`,{password:r})}createUser(t){return this.post("/users",t)}}return o.\u0275fac=function(){let n;return function(r){return(n||(n=e.n5z(o)))(r||o)}}(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var l=s(3599);let g=(()=>{class o{constructor(t,r,a){this.userApiService=t,this.router=r,this.activatedRoute=a,this.rows=[],this.filteredRows=[],this.loadingIndicator=!0,this.reorderable=!0,this.ColumnMode=d.hq}ngOnInit(){this.userApiService.getUsers().subscribe(t=>{this.rows=t.data,this.filteredRows=t.data,this.loadingIndicator=!1})}onRowClicked(t){"click"===t.type&&this.router.navigate([t.row.id],{relativeTo:this.activatedRoute})}filter(t){let r=t.target.value.toLowerCase();this.rows=this.filteredRows.filter(a=>-1!==this.getString(a).indexOf(r))}getString(t){let r=`${t.name.toString().toLowerCase()} `;return t.surname&&(r+=`${t.surname.toString().toLowerCase()}`),t.email&&(r+=`${t.email.toString().toLowerCase()}`),r}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c),e.Y36(l.F0),e.Y36(l.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user"]],decls:24,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-12","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title","d-flex","justify-content-between"],["routerLink","new","tabindex","-1","role","button",1,"btn","btn-primary"],[1,"col-12"],["type","text",1,"form-control","wd-150",3,"keyup"],[1,"table-responsive"],["rowHeight","auto",1,"bootstrap",3,"rows","loadingIndicator","columnMode","footerHeight","limit","activate"],["name","Name","prop","name"],["name","Surname","prop","surname"],["name","Email","prop","email"],["name","Company","prop","company.name"]],template:function(t,r){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Users"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"List"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12," Users "),e.TgZ(13,"a",10),e._uU(14,"New"),e.qZA()(),e.TgZ(15,"div",5)(16,"div",11)(17,"input",12),e.NdJ("keyup",function(u){return r.filter(u)}),e.qZA()()(),e.TgZ(18,"div",13)(19,"ngx-datatable",14),e.NdJ("activate",function(u){return r.onRowClicked(u)}),e._UZ(20,"ngx-datatable-column",15)(21,"ngx-datatable-column",16)(22,"ngx-datatable-column",17)(23,"ngx-datatable-column",18),e.qZA()()()()()()),2&t&&(e.xp6(19),e.Q6J("rows",r.rows)("loadingIndicator",r.loadingIndicator)("columnMode",r.ColumnMode.force)("footerHeight",50)("limit",10))},dependencies:[l.yS,d.nE,d.UC]}),o})();var i=s(433),h=s(2851),v=s(5226),b=s.n(v),Z=s(5954);function U(o,n){if(1&o&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function A(o,n){if(1&o&&(e.TgZ(0,"p",33),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.Oqu(t)}}const y=[{path:"",component:g},{path:":id",component:(()=>{class o{constructor(t,r,a,u,T){this.router=t,this.activatedRoute=r,this.userApiService=a,this.companyApiService=u,this.formBuilder=T,this.error=[],this.user=null,this.id=null,this.companies=[]}ngOnInit(){this.formGroup=this.formBuilder.group({name:["",i.kI.required],surname:["",i.kI.required],email:["",i.kI.required],user_role:["",i.kI.required],company_id:["",i.kI.required]}),this.id=this.activatedRoute.snapshot.paramMap.get("id"),null!==this.id&&"new"!==this.id&&this.userApiService.getUser(this.id).subscribe(t=>{this.user=t.data,this.formGroup.patchValue(t.data)}),this.companyApiService.getCompanies().subscribe(t=>{this.companies=t.data})}onSubmit(){this.error=[];const t={...this.user,...this.formGroup.value};"new"!==this.id?this.userApiService.updateUser(this.user.id,t).subscribe(()=>{this.router.navigate(["/user"])},r=>{if(r.errors)for(let a in r.errors)r.errors[a].forEach(u=>{this.error.push(u)});else this.error.push(r.message)}):this.userApiService.createUser(t).subscribe(()=>{this.router.navigate(["/user"])},r=>{if(r.errors)for(let a in r.errors)r.errors[a].forEach(u=>{this.error.push(u)});else this.error.push(r.message)})}updatePassword(){this.userApiService.updateUserPassword(this.user.id,this.password).subscribe(t=>{b().fire({icon:"success",title:"Success",text:"Password updated correctly"})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.F0),e.Y36(l.gz),e.Y36(c),e.Y36(Z.s),e.Y36(i.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit"]],decls:59,vars:5,consts:[[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-md-6","grid-margin","stretch-card"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"forms-sample",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","autocomplete","off","placeholder","Name","formControlName","name",1,"form-control"],["for","surname",1,"form-label"],["type","text","id","surname","autocomplete","off","placeholder","surname","formControlName","surname",1,"form-control"],["for","email",1,"form-label"],["type","text","id","email","autocomplete","off","placeholder","email","formControlName","email",1,"form-control"],["for","user_role",1,"form-label"],["id","user_role","formControlName","user_role",1,"form-select"],["value","super_admin"],["value","admin"],["value","company_admin"],["value","teacher"],["for","company_id",1,"form-label"],["id","company_id","formControlName","company_id",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","me-2"],["routerLink","../",1,"btn","btn-secondary"],["class","text-danger mt-1",4,"ngFor","ngForOf"],["type","password","id","password","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","me-2",3,"click"],[3,"value"],[1,"text-danger","mt-1"]],template:function(t,r){1&t&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Users"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h6",9),e._uU(12,"User"),e.qZA(),e.TgZ(13,"form",10),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Name"),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"div",11)(19,"label",14),e._uU(20,"Surname"),e.qZA(),e._UZ(21,"input",15),e.qZA(),e.TgZ(22,"div",11)(23,"label",16),e._uU(24,"Email"),e.qZA(),e._UZ(25,"input",17),e.qZA(),e.TgZ(26,"div",11)(27,"label",18),e._uU(28,"User Role"),e.qZA(),e.TgZ(29,"select",19)(30,"option",20),e._uU(31,"Super admin"),e.qZA(),e.TgZ(32,"option",21),e._uU(33,"Admin"),e.qZA(),e.TgZ(34,"option",22),e._uU(35,"Company admin"),e.qZA(),e.TgZ(36,"option",23),e._uU(37,"Teacher"),e.qZA()()(),e.TgZ(38,"div",11)(39,"label",24),e._uU(40,"Company"),e.qZA(),e.TgZ(41,"select",25),e.YNc(42,U,2,2,"option",26),e.qZA()(),e.TgZ(43,"button",27),e._uU(44,"Submit"),e.qZA(),e.TgZ(45,"div",28),e._uU(46,"Cancel"),e.qZA()(),e.YNc(47,A,2,1,"p",29),e.qZA()()(),e.TgZ(48,"div",6)(49,"div",7)(50,"div",8)(51,"h6",9),e._uU(52,"Reset password"),e.qZA(),e.TgZ(53,"div",11)(54,"label",12),e._uU(55,"Reset password"),e.qZA(),e.TgZ(56,"input",30),e.NdJ("ngModelChange",function(u){return r.password=u}),e.qZA()(),e.TgZ(57,"button",31),e.NdJ("click",function(){return r.updatePassword()}),e._uU(58,"Update password"),e.qZA()()()()()),2&t&&(e.xp6(6),e.Oqu(null===r.user?"New":"Edit"),e.xp6(7),e.Q6J("formGroup",r.formGroup),e.xp6(29),e.Q6J("ngForOf",r.companies),e.xp6(5),e.Q6J("ngForOf",r.error),e.xp6(9),e.Q6J("ngModel",r.password))},dependencies:[p.sg,l.rH,l.yS,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.On,i.sg,i.u]}),o})()}];let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,l.Bz.forChild(y),d.xD,i.u5,i.UX,h.e4]}),o})()}}]);